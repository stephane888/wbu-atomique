@use "../../../../../wbu-ressources-clean.scss" as *;
@use "./burger-button.scss";
/**
 * Help to build, classic menu, mega-menu
 */
.hbk-mega-menu {
  @mixin ul_menu() {
    list-style: none;
    margin: 0;
    padding: 0;
  }
  position: relative;
  // cette valeur doit etre ajuste par le js afin que l'enssemble fasse un cover sur mobile si necessaire.
  max-height: 100vh;
  // --burgers
  &--burgers {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: $wbu-background;
    color: color-yiq($wbu-background);
    margin-bottom: $wbu-margin;
    .burger__button {
      .line {
        stroke: color-yiq($wbu-background);
      }
    }
    .burger__right {
      padding-inline: $grid-gutter-width * 0.5;
      flex-basis: 0;
      flex-grow: 1;
      max-width: 100%;
      width: 100%;
      display: flex;
      justify-content: end;
    }
  }
  // menu level base
  &--items {
    @include ul_menu();
    .item {
      padding: 0;
      position: relative;
      display: flex;
      flex-wrap: wrap;

      .svg-arrow {
        width: $wbu-margin;
        height: $wbu-margin;
        align-self: center;
        margin-inline: $wbu-margin * 0.5;
        transform-origin: center;
        transform: rotate(0);
        position: absolute;
        right: $wbu-margin;
        top: $wbu-margin;
        @include WBUtransition();
      }
    }
    .item-link {
      padding: $wbu-margin;
      padding-inline: 0;
      display: block;
      text-decoration: none;
      flex-grow: 2;
      color: inherit;
      position: relative;
      @include WBUtransition();

      &:hover {
        background-color: rgba($wbu-background, 0.15);
      }
      &::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        top: auto;
        border-bottom: 1px solid #e9e9e9;
      }
    }
  }
  // Sub menu, classic
  &--items__sub {
    // herite class of base.
    @include ul_menu();
    position: relative;
    opacity: 0;
    z-index: 1;
    left: 0;
    top: 100%;
    @include WBUtransition($temps: 0.7s);
    background-color: #fff;
    width: 100%;
    padding-left: $wbu-margin;
    max-height: 0;
    overflow: hidden;
  }
  // Sur mobile pas besoin du hover
  .item.open {
    > .svg-arrow {
      transform: rotate(-180deg);
    }
    > .hbk-mega-menu--items__sub {
      max-height: 700px;
      opacity: 1;
    }
  }
  // Mega-menu
  .item.mega-item {
    .hbk-mega-menu--block {
      opacity: 0;
      z-index: 1;
      left: 0;
      position: relative;
      @include WBUtransition($temps: 0.7s);
      max-height: 0;
    }
  }
}
